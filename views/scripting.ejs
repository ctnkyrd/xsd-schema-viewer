<% include partials/header %>

<style>
    
</style>

<div class="container">
    <h1>DB Scripts will be here</h1>
    <div class="flexcontainer">
        <% result.forEach(function(val){ %>
        <div class="card" style="width: 18rem;">
            <div class="card-body">
                <h5 class="card-title">
                    <%= val.name %>
                </h5>
                <h6 class="card-subtitle mb-2 text-muted">Üst Şema - <em>
                        <%= val.substitutionGroup %></em></h6>
                <a class="btn btn-outline-info btn-sm" data-toggle="collapse" href="#id_desc_<%= val.name%>" role="button"
                    aria-expanded="false" aria-controls="id_desc_<%= val.name%>">Açıklama</a>
                <a class="btn btn-outline-success btn-sm" data-toggle="collapse" href="#id_cols_<%= val.name%>" role="button"
                    aria-expanded="false" aria-controls="id_cols_<%= val.name%>">Kolonlar</a>
                <a class="btn btn-outline-dark btn-sm" target="_blank" href="<%= xsdURL %>">XSD</a>
                <p class="card-text">
                    <div class="collapse multi-collapse" id="id_desc_<%= val.name%>">
                        <%= val.description %>
                    </div>
                    <div class="collapse multi-collapse" id="id_cols_<%= val.name%>">
                    <% val.columns.forEach(function(col){ %> 
                        <li class="columnlist"><strong><%= col.name %></strong>-<em><%= col.type %></em></li>
                    <% }) %>
                        <button class="btn btn-success btn-sm btn-block" data-toggle="modal" data-target="#id_mdl_<%= val.name%>">SQL</button>
                    </div>
            </div>
        </div>

        <!--modal-->
        <div class="modal fade" id="id_mdl_<%= val.name%>" tabindex="-1" role="dialog" aria-labelledby="id_mdl_<%= val.name%>" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="exampleModalLongTitle"><%= val.name%>-SQL Create Script</h5>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <%= val.dbscript%>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-dismiss="modal">Kapat</button>
            </div>
          </div>
        </div>
      </div>

        <!--modal-->


        <% }) %>
    </div>
</div>


<% include partials/footer %>